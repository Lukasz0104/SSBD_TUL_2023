<div class="row">
    <div
        aria-label="Choose active"
        class="btn-group mb-3 d-flex"
        role="group">
        <div>
            <select
                class="form-select w-auto"
                [(ngModel)]="year"
                (ngModelChange)="changeYear($event)">
                <option
                    *ngFor="let year of years"
                    [ngValue]="year"
                    (click)="toggleYear()">
                    {{ year }}
                </option>
            </select>
        </div>
        <div>
            <select
                class="form-select w-auto"
                [(ngModel)]="categoryName"
                (ngModelChange)="changeCategoryName($event)">
                <option
                    *ngFor="let name of categoryNames"
                    [ngValue]="name"
                    (click)="toggleName()">
                    {{ name }}
                </option>
            </select>
        </div>

        <span
            (click)="reload()"
            class="btn btn-primary flex-grow-0 d-flex justify-content-center align-items-center">
            <i class="bi bi-arrow-clockwise"></i>
        </span>
    </div>
</div>
<ng-container *ngIf="costs$ | async as costs; else loadingCosts">
    <div
        class="d-flex flex-column justify-content-between table-responsive border rounded"
        style="min-height: 300px">
        <table class="table text-center table-hover">
            <thead>
                <tr class="bg-light-subtle">
                    <th scope="col">
                        {{ 'component.fields.month' | translate }}
                    </th>
                    <th scope="col">
                        {{ 'component.fields.realRate' | translate }}
                    </th>
                    <th scope="col">
                        {{ 'component.fields.totalConsumption' | translate }}
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr
                    *ngFor="let cost of costs.data"
                    class="cursor-pointer align-middle">
                    <td>{{ cost.month | translate }}</td>
                    <td>{{ cost.realRate }}</td>
                    <td>{{ cost.totalConsumption }}</td>
                </tr>
            </tbody>
        </table>
        <div class="d-sm-flex justify-content-between m-2">
            <div>
                <ngb-pagination
                    [(page)]="page"
                    [collectionSize]="costs.totalSize"
                    [pageSize]="pageSize"
                    (pageChange)="getCosts()">
                </ngb-pagination>
            </div>

            <div>
                <select
                    [(ngModel)]="pageSize"
                    class="form-select w-auto">
                    <option [ngValue]="5">
                        {{ 'component.costs.display.five-items' | translate }}
                    </option>
                    <option [ngValue]="10">
                        {{ 'component.costs.display.ten-items' | translate }}
                    </option>
                    <option [ngValue]="15">
                        {{
                            'component.costs.display.fifteen-items' | translate
                        }}
                    </option>
                </select>
            </div>
        </div>
    </div>
</ng-container>

<ng-template #loadingCosts>
    <div class="d-flex flex-column justify-content-center align-items-center">
        <span class="spinner-border"></span>
        <span class="mt-3">{{ 'component.costs.loading' | translate }}</span>
    </div>
</ng-template>
