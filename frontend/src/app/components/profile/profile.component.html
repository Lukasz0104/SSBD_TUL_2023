<ng-container
    *ngIf="ownAccount$ | async as ownAccount; else loadingAccountData">
    <div ngbAccordion>
        <div
            ngbAccordionItem="personal"
            [collapsed]="false">
            <h2 ngbAccordionHeader>
                <button
                    ngbAccordionButton
                    class="fs-5">
                    Personal data
                </button>
            </h2>
            <div ngbAccordionCollapse>
                <div
                    ngbAccordionBody
                    class="d-flex flex-column flex-md-row justify-content-start align-items-center mb-3 mb-md-0">
                    <ng-template>
                        <div class="px-5 mb-4 mb-md-2">
                            <div>
                                <i
                                    class="bi bi-person"
                                    style="font-size: 8rem"></i>
                            </div>
                            <button
                                class="fs-5 w-100 btn btn-outline-primary"
                                (click)="edit()">
                                Edit
                            </button>
                        </div>
                        <div
                            class="justify-content-center px-3 px-md-5 row fs-5">
                            <div class="col-md">
                                <p><strong>First name</strong></p>
                                <p>{{ ownAccount.firstName }}</p>
                                <p><strong>Last name</strong></p>
                                <p>{{ ownAccount.lastName }}</p>
                                <p><strong>Login</strong></p>
                                <p>{{ ownAccount.login }}</p>
                            </div>
                            <div class="col-md">
                                <p><strong>E-mail</strong></p>
                                <p>{{ ownAccount.email }}</p>
                                <p><strong>Language</strong></p>
                                <p>{{ ownAccount.language }}</p>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
        <div
            ngbAccordionItem="accessLevel"
            [collapsed]="false">
            <h2 ngbAccordionHeader>
                <button
                    ngbAccordionButton
                    class="fs-5">
                    Access level data
                </button>
            </h2>
            <div ngbAccordionCollapse>
                <div
                    ngbAccordionBody
                    class="d-flex justify-content-start align-items-center">
                    <ng-template>
                        <div
                            class="row px-3 px-md-5 justify-content-center w-100">
                            <div
                                *ngFor="
                                    let accessLevel of ownAccount.accessLevels
                                "
                                class="fs-5 col-md p-3">
                                <p><strong>Level</strong></p>
                                <p>{{ accessLevel.level | titlecase }}</p>
                                <span *ngIf="accessLevel.address as address">
                                    <hr />
                                    <p><strong>Address</strong></p>
                                    <p>
                                        {{ address.street }}
                                        {{ address.buildingNumber }}
                                    </p>
                                    <p>
                                        {{ address.postalCode }}
                                        {{ address.city }}
                                    </p>
                                </span>
                                <span *ngIf="accessLevel.licenseNumber">
                                    <hr />
                                    <p><strong>License number</strong></p>
                                    <p>{{ accessLevel.licenseNumber }}</p>
                                </span>
                                <hr
                                    class="d-block d-md-none border-top border-5 border-dark" />
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
</ng-container>
<ng-template #loadingAccountData>
    <div class="d-flex flex-column justify-content-center align-items-center">
        <span class="spinner-border"></span>
        <span class="mt-3">Loading account data...</span>
    </div>
</ng-template>
